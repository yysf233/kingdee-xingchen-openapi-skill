---
id: "kdcloud-9d154a37712511eda0b32fb6acbf39d9"
title: "凭证保存"
source: "金蝶云社区"
url: "https://open.jdy.com/#/files/api/detail?index=3&categrayId=&id=9d154a37712511eda0b32fb6acbf39d9"
author: ""
published_at: ""
product: "金蝶云苍穹"
module: ["财税云", "凭证"]
language: "Unknown"
version_hint: ["V2"]
keywords: []
quality: "B"
---

# 凭证保存

### 基本信息

-   用途说明：凭证新增及修改。审核、删除等详见[通用操作接口](https://open.jdy.com/#/files/api/detail?index=2&categrayId=3cc8ee9a663e11eda5c84b5d383a2b93&id=9e804b8c712511eda0b39f724d124b07)
-   请求方式：POST
-   请求地址：https://api.kingdee.com/jdy/v2/fi/voucher

### 请求参数

#### headers参数

| 参数名称 | 参数示例 | 是否必填 | 参数说明 |
| --- | --- | --- | --- |
| Content-Type | application/json | true | 固定传：application/json |
| X-Api-ClientID | 205022 | true | 应用id，[创建指引](https://open.jdy.com/#/files/api/detail?index=3&categrayId=316e1f5bd9d711ed8e36c17691e84ff5&id=a540e3dcd9d811ed8e3677dc79b66e86&noside=true) |
| X-Api-Auth-Version | 2.0 | true | 固定传:2.0 |
| X-Api-TimeStamp | 1655775240000 | true | 当前时间毫秒时间戳，有效期为5min |
| X-Api-SignHeaders | X-Api-TimeStamp,X-Api-Nonce | true | 固定传：X-Api-TimeStamp,X-Api-Nonce |
| X-Api-Nonce | 1655775240000 | true | 随机正整数 |
| X-Api-Signature | xxx | true | [参考加密规则](https://open.jdy.com/#/files/api/detail?index=3&categrayId=5403e0fd6a5811eda819b759130d6d33&id=b5c26557da9d11ed8e36f9799578d2e1&noside=true) |
| app-token | xxx | true | 产品账套级别的token，[获取指引](https://open.jdy.com/#/files/api/detail?index=3&categrayId=5403e0fd6a5811eda819b759130d6d33&id=9076d1a6da9d11ed8e36874bed64e0be&noside=true) |
| X-GW-Router-Addr | https://tf.jdy.com | true | IDC域名，获取appKey返回消息体内的domain字段 |

#### body参数

| 参数名称 | 参数类型 | 是否必填 | 参数说明 |
| --- | --- | --- | --- |
| items | List <Item> | true | 凭证保存列表 |

**Item**

| 参数名称 | 参数类型 | 是否必填 | 参数说明 |
| --- | --- | --- | --- |
| date | string | true | 凭证日期 YYYY-MM-DD形式 |
| entry\_list | List <Entry> | true | 分录列表 |
| group\_id | string | true | 凭证字id（凭证字id与凭证字编码二选一） |
| group\_number | string | true | 传入group\_number时，id非必填 |
| attachment\_ids | List <string> | false | 关联凭证附件（来源于凭证附件列表接口，要求所填附件必须有同一个adjustid） |
| id | string | false | id（修改时必填） |
| number | string | false | 凭证号，未填写时自动填补断号 |
| remark | string | false | 备注 |
| source\_bill\_no | string | false | 外部唯一标识，已存在时不允许保存凭证 |

**Entry**

| 参数名称 | 参数类型 | 是否必填 | 参数说明 |
| --- | --- | --- | --- |
| account\_id | string | true | 科目 id |
| account\_number | string | true | 传入account\_number时，account\_id非必填 |
| amount\_for | string | true | 金额（原币） |
| credit\_amount | string | true | 贷方金额(本位币)（dc=-1时必填，dc=1时不填） |
| currency\_id | string | true | 币别id |
| dc | string | true | 借贷方向（1：借，-1：贷） |
| debit\_amount | string | true | 借方金额(本位币)（dc=1时必填，dc=-1时不填） |
| explanation | string | true | 摘要 |
| id | string | true | 分录ID |
| assist\_list | List <Assist> | false | 辅助核算 |
| price | string | false | 价格 |
| quantity | number | false | 数量（会根据 金额/数量 自动算出单价） |

**Assist**

| 参数名称 | 参数类型 | 是否必填 | 参数说明 |
| --- | --- | --- | --- |
| id | string | true | 辅助核算id |
| type | string | true | 核算项目类别(bd\_customer:客户，bd\_supplier:供应商， bd\_material:商品，bd\_department:部门， bd\_auxinfo:辅助资料，bd\_employee:职员，bd\_store:仓库) |
| bd\_aux\_info\_type\_id | string | false | 当type为bd\_auxinfo时,辅助资料类别id |
| bd\_aux\_info\_type\_number | string | false | 当type为bd\_auxinfo时,辅助资料类别编码,同时传id时优先取id |
| number | string | false | 辅助核算编码 |

#### 请求示例

```bash
curl --location --request  post 'https://api.kingdee.com/jdy/v2/fi/voucher' \
--header 'Content-Type: application/json' \
--header 'X-Api-ClientID: 205022' \
--header 'X-Api-Auth-Version: 2.0' \
--header 'X-Api-TimeStamp: 1655775240000' \
--header 'X-Api-Nonce: 1655775240000' \
--header 'X-Api-SignHeaders: X-Api-TimeStamp,X-Api-Nonce' \
--header 'X-Api-Signature: xxx' \
--header 'app-token: xxx' \
--header 'X-GW-Router-Addr: https://tf.jdy.com' \
--data-row ' { 	"items":[ 		{ 			"attachment_ids":[], 			"date":"2022-07-13", 			"entry_list":[ 				{ 					"account_id":"1", 					"account_number":"001", 					"amount_for":"100", 					"assist_list":[ 						{ 							"bd_aux_info_type_id":"1", 							"bd_aux_info_type_number":"001", 							"id":"1", 							"number":"001", 							"type":"bd_auxinfo" 						} 					], 					"credit_amount":"100", 					"currency_id":"1", 					"dc":"1", 					"debit_amount":"100", 					"explanation":"无", 					"id":"1", 					"price":"100", 					"quantity":1 				} 			], 			"group_id":"1", 			"group_number":"001", 			"id":"1", 			"number":"001", 			"remark":"无", 			"source_bill_no":"001" 		} 	] }'
```

### 响应参数

| 参数名称 | 参数类型 | 参数说明 |
| --- | --- | --- |
| errcode | integer | 返回码，成功时为0 |
| description | string | 返回信息，成功时为success，失败时为具体信息 |
| data | Data | 业务返回具体对象 |

**Data**

| 参数名称 | 参数类型 | 参数说明 |
| --- | --- | --- |
| errors | List <string> | 失败信息数组 |
| ids | List <string> | id数组 |

#### 响应示例

```json
{
  "data": {
    "errors": [
      "失败"
    ],
    "ids": [
      "1"
    ]
  },
  "description": "success",
  "errcode": 0
}
```

#### 返回码

| 返回码 | 描述 | 解决方案 |
| --- | --- | --- |
| [公告返回码](https://open.jdy.com/#/files/api/detail?index=2&categrayId=1f51c576013945e2af68ef15d4245a48&id=525e704824d24b178ab466530456c037) | 公告返回码 |  |
| 2000002000 | 系统错误,请到开发者社区提单反馈 | [开发者社区](https://vip.kingdee.com/developer?productLineId=29) |
