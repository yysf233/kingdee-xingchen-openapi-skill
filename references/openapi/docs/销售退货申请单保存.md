---
id: "kdcloud-5e982c277c8c11ed8dde8b186d65210e"
title: "销售退货申请单保存"
source: "金蝶云社区"
url: "https://open.jdy.com/#/files/api/detail?index=3&categrayId=&id=5e982c277c8c11ed8dde8b186d65210e"
author: ""
published_at: ""
product: "金蝶云苍穹"
module: ["进销存云", "销售单据", "销售退货申请"]
language: "Kingscript"
version_hint: ["V2"]
keywords: []
quality: "B"
---

# 销售退货申请单保存

### 基本信息

-   用途说明：销售退货申请单新增及修改。审核、删除等详见[通用操作接口](https://open.jdy.com/#/files/api/detail?index=2&categrayId=3cc8ee9a663e11eda5c84b5d383a2b93&id=9e804b8c712511eda0b39f724d124b07)
-   请求方式：POST
-   请求地址：https://api.kingdee.com/jdy/v2/scm/sal\_in\_bound\_request

### 请求参数

#### headers参数

| 参数名称 | 参数示例 | 是否必填 | 参数说明 |
| --- | --- | --- | --- |
| Content-Type | application/json | true | 固定传：application/json |
| X-Api-ClientID | 205022 | true | 应用id，[创建指引](https://open.jdy.com/#/files/api/detail?index=3&categrayId=316e1f5bd9d711ed8e36c17691e84ff5&id=a540e3dcd9d811ed8e3677dc79b66e86&noside=true) |
| X-Api-Auth-Version | 2.0 | true | 固定传:2.0 |
| X-Api-TimeStamp | 1655775240000 | true | 当前时间毫秒时间戳，有效期为5min |
| X-Api-SignHeaders | X-Api-TimeStamp,X-Api-Nonce | true | 固定传：X-Api-TimeStamp,X-Api-Nonce |
| X-Api-Nonce | 1655775240000 | true | 随机正整数 |
| X-Api-Signature | xxx | true | [参考加密规则](https://open.jdy.com/#/files/api/detail?index=3&categrayId=5403e0fd6a5811eda819b759130d6d33&id=b5c26557da9d11ed8e36f9799578d2e1&noside=true) |
| app-token | xxx | true | 产品账套级别的token，[获取指引](https://open.jdy.com/#/files/api/detail?index=3&categrayId=5403e0fd6a5811eda819b759130d6d33&id=9076d1a6da9d11ed8e36874bed64e0be&noside=true) |
| X-GW-Router-Addr | https://tf.jdy.com | true | IDC域名，获取appKey返回消息体内的domain字段 |

#### body参数

| 参数名称 | 参数类型 | 是否必填 | 参数说明 |
| --- | --- | --- | --- |
| bill\_date | string | true | 出库日期,格式：2019-01-01 |
| customer\_id | string | true | 客户 |
| material\_entity | List <MaterialEntity> | true | 商品分录 |
| all\_debt | number | false | 客户应收款余额 |
| attachments\_url | List <Attachments> | false | 上传的附件url |
| bill\_dis\_amount | number | false | 整单折扣额 |
| bill\_dis\_rate | number | false | 整单折扣率% |
| bill\_no | string | false | 单据编码 |
| contact\_address | string | false | 联系信息-详细地址 |
| contact\_city\_id | string | false | 联系信息-市ID |
| contact\_country\_id | string | false | 联系信息-国家ID |
| contact\_district\_id | string | false | 联系信息-区ID |
| contact\_linkman | string | false | 联系信息-联系人 |
| contact\_phone | string | false | 联系信息-联系方式 |
| contact\_province\_id | string | false | 联系信息-省ID |
| currency\_id | string | false | 币别id |
| currency\_number | string | false | 币别编码，currency\_id和currency\_number二选一 |
| custom\_field | Map <string> | false | 自定义字段[使用指南](https://open.jdy.com/#/files/api/detail?id=76567ff2a06311edaa4b3d71bf0fce53&noside=true) |
| customer\_number | string | false | 客户编码 |
| dept\_number | string | false | 部门编码 |
| emp\_id | string | false | 业务员 |
| emp\_number | string | false | 业务员编码，emp\_id和emp\_number二选一 |
| id | string | false | 单据ID，新增不填，更新时必填（id为空时代表新增单据）修改单据时必填 |
| ignore\_warn | boolean | false | 是否忽略告警信息(如：名称已存在)保存客户，true:忽略，默认false |
| last\_debt | number | false | 客户上次欠款 |
| operation\_key | string | false | 操作类型，审核audit、提交submit |
| remark | string | false | 单据备注 |
| return\_reason\_id | string | false | 退货原因id |
| return\_reason\_number | string | false | 退货原因编码，return\_reason\_id和return\_reason\_number二选一 |
| reverse\_condition\_calculate | boolean | false | 是否从反算单价（保存修改应保持一致传参），true:反算，默认false |
| total\_amount | number | false | 本次应退账款 |
| trans\_type | string | false | 业务类型,1：现销，2：赊销，3：委托销售 |

**Attachments**

| 参数名称 | 参数类型 | 是否必填 | 参数说明 |
| --- | --- | --- | --- |
| panel | string | true | 服务器返回的附件地址 |
| url | string | true | 附件类型，默认填写attachmentpanelap |

**MaterialEntity**

| 参数名称 | 参数类型 | 是否必填 | 参数说明 |
| --- | --- | --- | --- |
| material\_id | string | true | 商品id |
| qty | number | true | 数量 |
| unit\_id | string | true | 单位id |
| act\_non\_tax\_amount | number | false | 实际不含税金额 |
| act\_tax\_price | number | false | 实际含税单价 |
| all\_amount | number | false | 价税合计 |
| amount | number | false | 金额 |
| aux\_id1 | string | false | 辅助属性1id |
| aux\_id2 | string | false | 辅助属性2id |
| aux\_id3 | string | false | 辅助属性3id |
| aux\_number1 | string | false | 辅助属性1编码 |
| aux\_number2 | string | false | 辅助属性2编码 |
| aux\_number3 | string | false | 辅助属性3编码 |
| aux\_prop\_id | string | false | 辅助属性id (辅助属性商品必填) |
| aux\_prop\_number | string | false | 辅助属性编码 |
| aux\_qty | number | false | 辅助数量（多单位商品，需要使用辅助单位时必填） |
| aux\_unit\_id | string | false | 辅助单位id（多单位商品，需要使用辅助单位时必填） |
| aux\_unit\_number | string | false | 辅助单位编码 |
| barcode | string | false | 条形码 |
| base\_unit\_id | string | false | 基本单位id |
| base\_unit\_number | string | false | 基本单位编，,base\_unit\_id和base\_unit\_number二选一 |
| batch\_no | string | false | 批次号（批次商品必填） |
| bill\_dis\_distribution | number | false | 整单折扣分配额 |
| cess | number | false | 增值税率 |
| comment | string | false | 行备注 |
| cost | number | false | 成本 |
| cur\_settle\_amount | number | false | 本次核销金额 |
| custom\_entity\_field | Map <string> | false | 自定义字段[使用指南](https://open.jdy.com/#/files/api/detail?id=76567ff2a06311edaa4b3d71bf0fce53&noside=true) |
| dis\_amount | number | false | 折扣额 |
| dis\_price | number | false | 折扣单价 |
| dis\_rate | number | false | 折算率 |
| discount | number | false | 折扣 |
| divide\_diff\_amount | number | false | 优惠分摊金额 |
| entry\_settle\_status | string | false | 分录核销状态，未收款：A，部分收款：B，全部收款：C |
| entry\_status | string | false | 分录状态 |
| fee | number | false | 销售费用分摊 |
| id | string | false | 分录id |
| inv\_base\_qty | number | false | 基本库存数量 |
| inv\_qty | number | false | 库存数量 |
| is\_free | boolean | false | 是否赠品 |
| kf\_date | string | false | 生产日期（保质期商品必填，示例：2022-01-12） |
| kf\_period | integer | false | 保质期天数（保质期商品必填) |
| kf\_type | string | false | 保质期类型：1/天，2/月，3/年（保质期商品必填） |
| material\_help\_code | string | false | 商品助记码 |
| material\_is\_asst\_attr | boolean | false | 商品是否启用辅助属性 |
| material\_is\_batch | boolean | false | 商品是否开启批次 |
| material\_is\_kf\_period | boolean | false | 商品是否开启保质期 |
| material\_is\_multi\_unit | boolean | false | 商品是否多单位 |
| material\_is\_serial | boolean | false | 商品是否序列号 |
| material\_model | string | false | 商品规格 |
| material\_number | string | false | 商品编码 |
| picture | string | false | 图片url |
| pre\_dis\_amount | number | false | 折前金额 |
| price | number | false | 单价 |
| pro\_license | string | false | 生产许可证号 |
| pro\_place | string | false | 产地 |
| pro\_reg\_no | string | false | 注册证号 |
| return\_qty | number | false | 退货基本数量 |
| return\_qty\_unit | number | false | 退货数量 |
| seq | integer | false | 分录序号 |
| sn\_list | string | false | 序列号 格式：001:备注1（序列号:序列号备注,多个序列号以英文分号字符分隔）,序列号商品必填 |
| sn\_list\_id | string | false | 序列号流转ID |
| sp\_id | string | false | 仓位id |
| sp\_number | string | false | 仓位编码，sp\_id和sp\_number二选一 |
| src\_bill\_type\_id | string | false | 源单类型：sal\_bill\_outbound |
| src\_entry\_id | string | false | 源单分录id |
| src\_inter\_id | string | false | 源单id |
| stock\_id | string | false | 仓库id |
| stock\_is\_allow\_freight | boolean | false | 仓库启用仓位管理 |
| stock\_number | string | false | 仓库编码 |
| tax\_amount | number | false | 税额 |
| tax\_price | number | false | 含税单价 |
| unit\_cost | number | false | 单位成本 |
| unit\_number | string | false | 单位编码 |
| valid\_date | string | false | 有效日期 |

#### 请求示例

```bash
curl --location --request  post 'https://api.kingdee.com/jdy/v2/scm/sal_in_bound_request' \
--header 'Content-Type: application/json' \
--header 'X-Api-ClientID: 205022' \
--header 'X-Api-Auth-Version: 2.0' \
--header 'X-Api-TimeStamp: 1655775240000' \
--header 'X-Api-Nonce: 1655775240000' \
--header 'X-Api-SignHeaders: X-Api-TimeStamp,X-Api-Nonce' \
--header 'X-Api-Signature: xxx' \
--header 'app-token: xxx' \
--header 'X-GW-Router-Addr: https://tf.jdy.com' \
--data-row ' { 	"all_debt":100, 	"attachments_url":[ 		{ 			"panel":"xxx", 			"url":"xx" 		} 	], 	"bill_date":"2019-01-01", 	"bill_dis_amount":200, 	"bill_dis_rate":5, 	"bill_no":"001", 	"contact_address":"深圳市", 	"contact_city_id":"3", 	"contact_country_id":"1", 	"contact_district_id":"4", 	"contact_linkman":"联系人A", 	"contact_phone":"13322334455", 	"contact_province_id":"2", 	"currency_id":"1", 	"currency_number":"001", 	"custom_field":{}, 	"customer_id":"727402661418126336", 	"customer_number":"ll", 	"dept_number":"003", 	"emp_id":"1", 	"emp_number":"001", 	"id":"1", 	"ignore_warn":true, 	"last_debt":100, 	"material_entity":[ 		{ 			"act_non_tax_amount":10.2, 			"act_tax_price":50.2, 			"all_amount":90.0, 			"amount":80.2, 			"aux_id1":"1", 			"aux_id2":"2", 			"aux_id3":"1", 			"aux_number1":"001", 			"aux_number2":"002", 			"aux_number3":"003", 			"aux_prop_id":"1", 			"aux_prop_number":"001", 			"aux_qty":1, 			"aux_unit_id":"697110094189441024", 			"aux_unit_number":"001", 			"barcode":"22112", 			"base_unit_id":"1", 			"base_unit_number":"g", 			"batch_no":"2022506", 			"bill_dis_distribution":10.2, 			"cess":30.2, 			"comment":"xxxxx", 			"cost":10.2, 			"cur_settle_amount":30.2, 			"custom_entity_field":{}, 			"dis_amount":10.2, 			"dis_price":10.2, 			"dis_rate":3, 			"discount":3, 			"divide_diff_amount":20.2, 			"entry_settle_status":"C", 			"entry_status":"Z", 			"fee":20, 			"id":"1", 			"inv_base_qty":50, 			"inv_qty":50, 			"is_free":false, 			"kf_date":"2020-01-01", 			"kf_period":200, 			"kf_type":"2", 			"material_help_code":"002", 			"material_id":"697140092908614656", 			"material_is_asst_attr":false, 			"material_is_batch":false, 			"material_is_kf_period":false, 			"material_is_multi_unit":false, 			"material_is_serial":false, 			"material_model":"001", 			"material_number":"1", 			"picture":"xxx", 			"pre_dis_amount":20.2, 			"price":99, 			"pro_license":"111201", 			"pro_place":"深圳", 			"pro_reg_no":"2002010", 			"qty":1, 			"return_qty":20, 			"return_qty_unit":20, 			"seq":1, 			"sn_list":"001", 			"sn_list_id":"1", 			"sp_id":"", 			"sp_number":"", 			"src_bill_type_id":"sal_bill_outbound", 			"src_entry_id":"1", 			"src_inter_id":"1", 			"stock_id":"697105306978627584", 			"stock_is_allow_freight":false, 			"stock_number":"001", 			"tax_amount":20.2, 			"tax_price":101, 			"unit_cost":20.2, 			"unit_id":"697110094189441024", 			"unit_number":"g", 			"valid_date":"180" 		} 	], 	"operation_key":"audit", 	"remark":"备注", 	"return_reason_id":"1", 	"return_reason_number":"001", 	"reverse_condition_calculate":false, 	"total_amount":500, 	"trans_type":"1" }'
```

### 响应参数

| 参数名称 | 参数类型 | 参数说明 |
| --- | --- | --- |
| errcode | integer | 返回码，成功时为0 |
| description | string | 返回信息，成功时为success，失败时为具体信息 |
| data | Data | 业务返回具体对象 |

**Data**

| 参数名称 | 参数类型 | 参数说明 |
| --- | --- | --- |
| id\_number\_map | Map <string> | id与编码map |
| ids | List <string> | 单据id数组对象 |

#### 响应示例

```json
{
  "data": {
    "id_number_map": {},
    "ids": [
      "1"
    ]
  },
  "description": "success",
  "errcode": 0
}
```

#### 返回码

| 返回码 | 描述 | 解决方案 |
| --- | --- | --- |
| [公告返回码](https://open.jdy.com/#/files/api/detail?index=2&categrayId=1f51c576013945e2af68ef15d4245a48&id=525e704824d24b178ab466530456c037) | 公告返回码 |  |
| 2000002000 | 系统错误,请到开发者社区提单反馈 | [开发者社区](https://vip.kingdee.com/developer?productLineId=29) |
