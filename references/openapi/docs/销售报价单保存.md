---
id: "kdcloud-5595e83eb96011ed83eadfa1b3398251"
title: "销售报价单保存"
source: "金蝶云社区"
url: "https://open.jdy.com/#/files/api/detail?index=3&categrayId=&id=5595e83eb96011ed83eadfa1b3398251"
author: ""
published_at: ""
product: "金蝶云苍穹"
module: ["进销存云", "销售单据", "销售报价单"]
language: "Kingscript"
version_hint: ["V2"]
keywords: []
quality: "B"
---

# 销售报价单保存

### 基本信息

-   用途说明：销售报价单保存
-   请求方式：POST
-   请求地址：https://api.kingdee.com/jdy/v2/scm/sal\_quota

### 请求参数

#### headers参数

| 参数名称 | 参数示例 | 是否必填 | 参数说明 |
| --- | --- | --- | --- |
| Content-Type | application/json | true | 固定传：application/json |
| X-Api-ClientID | 205022 | true | 应用id，[创建指引](https://open.jdy.com/#/files/api/detail?index=3&categrayId=316e1f5bd9d711ed8e36c17691e84ff5&id=a540e3dcd9d811ed8e3677dc79b66e86&noside=true) |
| X-Api-Auth-Version | 2.0 | true | 固定传:2.0 |
| X-Api-TimeStamp | 1655775240000 | true | 当前时间毫秒时间戳，有效期为5min |
| X-Api-SignHeaders | X-Api-TimeStamp,X-Api-Nonce | true | 固定传：X-Api-TimeStamp,X-Api-Nonce |
| X-Api-Nonce | 1655775240000 | true | 随机正整数 |
| X-Api-Signature | xxx | true | [参考加密规则](https://open.jdy.com/#/files/api/detail?index=3&categrayId=5403e0fd6a5811eda819b759130d6d33&id=b5c26557da9d11ed8e36f9799578d2e1&noside=true) |
| app-token | xxx | true | 产品账套级别的token，[获取指引](https://open.jdy.com/#/files/api/detail?index=3&categrayId=5403e0fd6a5811eda819b759130d6d33&id=9076d1a6da9d11ed8e36874bed64e0be&noside=true) |
| X-GW-Router-Addr | https://tf.jdy.com | true | IDC域名，获取appKey返回消息体内的domain字段 |

#### body参数

| 参数名称 | 参数类型 | 是否必填 | 参数说明 |
| --- | --- | --- | --- |
| bill\_date | string | true | 出库日期,格式：2019-01-01 |
| customer\_id | string | true | 客户信息 |
| material\_entity | List <MaterialEntity> | true | 商品分录 |
| settle\_customer\_id | string | true | 客户信息 |
| allocate\_rule | string | false | 销售费用分摊规则；1: 按价税合计分摊（默认）； 2:按数量分摊 |
| attachments\_url | List <AttachmentsUrl> | false | 附件地址 |
| bill\_dis\_amount | number | false | 整单折扣额 |
| bill\_dis\_rate | number | false | 整单折扣率% |
| bill\_no | string | false | 单据编码 |
| contact\_address | string | false | 联系信息-详细地址 |
| contact\_city\_id | string | false | 联系信息-市ID |
| contact\_country\_id | string | false | 联系信息-国家ID |
| contact\_district\_id | string | false | 联系信息-区ID |
| contact\_linkman | string | false | 联系信息-联系人 |
| contact\_phone | string | false | 联系信息-联系方式 |
| contact\_province\_id | string | false | 联系信息-省ID |
| cost\_fee | number | false | 销售费用 |
| cost\_fee\_entity | CostFeeEntity | false | 销售费用明细，没有则传null或不传该字段 |
| currency\_id | string | false | 币别id |
| cus\_bear\_fee\_entry | List <CusBearFeeEntry> | false | 客户承担费用单据体 |
| cus\_bear\_fee\_status | string | false | 客户承担费用参数状态；”B：计入应收账款，O：计入其他收入 |
| cus\_currency\_id | string | false | 客户承担费用币别id |
| cus\_exchange\_rate | string | false | 客户承担费用汇率 |
| custom\_field | Map <string> | false | 自定义字段[使用指南](https://open.jdy.com/#/files/api/detail?id=76567ff2a06311edaa4b3d71bf0fce53&noside=true) |
| customer\_number | string | false | 客户编码 |
| delivery\_type\_id | string | false | 交货方式id |
| dispatcher\_address | string | false | 发货地址-详细地址 |
| dispatcher\_city\_id | string | false | 发货地址-市ID |
| dispatcher\_country\_id | string | false | 发货国家id |
| dispatcher\_district\_id | string | false | 发货地址-区ID |
| dispatcher\_linkman | string | false | 发货人 |
| dispatcher\_phone | string | false | 发货联系电话 |
| dispatcher\_province\_id | string | false | 发货地址-省ID |
| emp\_id | string | false | 业务员信息 |
| emp\_number | string | false | 业务员编码 |
| id | string | false | 单据ID，新增不填，更新时必填（id为空时代表新增单据），修改单据时必填 |
| ignore\_warn | boolean | false | 是否忽略告警信息(如：单价为0)保存订单，true:忽略，默认false |
| name | string | false | 报价名称 |
| operation\_key | string | false | 操作类型，固定取值：special\_save，执行特殊保存是必填 |
| payment\_entry | List <PaymentEntry> | false | 收款账户 |
| remark | string | false | 单据备注 |
| required\_invoice | boolean | false | 是否需要开票 |
| reverse\_condition\_calculate | boolean | false | 是否从反算单价（保存修改应保持一致传参），true:反算，默认false |
| total\_amount | number | false | 本次应收账款 |
| total\_ins\_amount | number | false | 本次收款 |

**PaymentEntry**

| 参数名称 | 参数类型 | 是否必填 | 参数说明 |
| --- | --- | --- | --- |
| paid\_amount | number | false | 收款金额 |
| pay\_comment | string | false | 备注 |
| pay\_type\_id | string | false | 收款方式 |
| settle\_account\_id | string | false | 收款账户 |

**CusBearFeeEntry**

| 参数名称 | 参数类型 | 是否必填 | 参数说明 |
| --- | --- | --- | --- |
| income\_amount | string | false | 收入金额 |
| income\_comment | string | false | 客户承担费用备注 |
| income\_name\_id | string | false | 收入名称id |

**CostFeeEntity**

| 参数名称 | 参数类型 | 是否必填 | 参数说明 |
| --- | --- | --- | --- |
| del\_ids | string | false | 需要删除的销售费用分录ID，多个用英文逗号隔开；已经生成了其他应付单的费用不能删除，前端需要控制 |
| fee\_records | List <CostFeeRows> | false | 销售费用分录 |

**CostFeeRows**

| 参数名称 | 参数类型 | 是否必填 | 参数说明 |
| --- | --- | --- | --- |
| all\_amount | string | false | 价税合计 |
| all\_amount\_for | string | false | 价税合计本位币 |
| amount | string | false | 费用 |
| amount\_for | string | false | 费用本位币 |
| cess | string | false | 税率 |
| comment | string | false | 备注 |
| currency\_id | string | false | 币别id |
| exchange\_rate | string | false | 汇率 |
| id | string | false | 销售费用分录ID，修改时必传，否则为新增 |
| linked\_bill\_no | string | false | 生成的其他应付单号 |
| pacct\_type\_id | string | false | 支出类型 |
| receive\_info\_entity | List <ReceiveInfoRows> | false | 付款信息单据体 |
| supplier\_id | string | false | 供应商，当付款金额合计等于费用时为非必填项 |
| tax\_amount | string | false | 税额 |

**ReceiveInfoRows**

| 参数名称 | 参数类型 | 是否必填 | 参数说明 |
| --- | --- | --- | --- |
| pay\_type\_id | string | false | 付款方式 |
| receive\_amount | string | false | 付款金额 |
| settle\_account\_id | string | false | 付款账户 |

**AttachmentsUrl**

| 参数名称 | 参数类型 | 是否必填 | 参数说明 |
| --- | --- | --- | --- |
| url | string | false | 附件地址 |

**MaterialEntity**

| 参数名称 | 参数类型 | 是否必填 | 参数说明 |
| --- | --- | --- | --- |
| aux\_prop\_id | string | true | 辅助属性(辅助属性商品必填) |
| material\_id | string | true | 商品 |
| price | number | true | 单价 |
| qty | number | true | 数量 |
| unit\_id | string | true | 单位 |
| all\_amount | number | false | 价税合计 |
| amount | number | false | 金额 |
| bill\_dis\_before\_amount | number | false | 整单折前价税合计 |
| cess | string | false | 商品增值税税率；不传后端自取，传入则以传入为准 |
| comment | string | false | 商品行备注 |
| custom\_entity\_field | Map <string> | false | 自定义字段[使用指南](https://open.jdy.com/#/files/api/detail?id=76567ff2a06311edaa4b3d71bf0fce53&noside=true) |
| delivery\_date | string | false | 预计交货日期 |
| dis\_amount | number | false | 折扣额 |
| discount | number | false | 折扣（折） |
| id | string | false | 商品分录id，新增不传该字段，修改必传 |
| is\_free | boolean | false | 是否赠品 |
| material\_number | string | false | 商品编码 |
| pre\_dis\_amount | string | false | 折前金额 |
| pro\_license | string | false | 生产许可证号 |
| regain\_price | boolean | false | 修改数量是否重新取价；默认为：true |
| sp\_id | string | false | 仓位，启用了仓位管理则必填 |
| stock\_id | string | false | 仓库 |
| tax\_amount | string | false | 商品税额 |
| tax\_price | number | false | 含税单价（根据设置与price二选一） |

#### 请求示例

```bash
curl --location --request  post 'https://api.kingdee.com/jdy/v2/scm/sal_quota' \
--header 'Content-Type: application/json' \
--header 'X-Api-ClientID: 205022' \
--header 'X-Api-Auth-Version: 2.0' \
--header 'X-Api-TimeStamp: 1655775240000' \
--header 'X-Api-Nonce: 1655775240000' \
--header 'X-Api-SignHeaders: X-Api-TimeStamp,X-Api-Nonce' \
--header 'X-Api-Signature: xxx' \
--header 'app-token: xxx' \
--header 'X-GW-Router-Addr: https://tf.jdy.com' \
--data-row ' { 	"allocate_rule":"1", 	"attachments_url":[ 		{ 			"url":"https://xxx.png" 		} 	], 	"bill_date":"2019-01-01", 	"bill_dis_amount":2.21, 	"bill_dis_rate":3, 	"bill_no":"001", 	"contact_address":"深圳市", 	"contact_city_id":"3", 	"contact_country_id":"1", 	"contact_district_id":"4", 	"contact_linkman":"张三", 	"contact_phone":"13825254099", 	"contact_province_id":"2", 	"cost_fee":30.2, 	"cost_fee_entity":{ 		"del_ids":"1", 		"fee_records":[ 			{ 				"all_amount":"100", 				"all_amount_for":"20", 				"amount":"50.5", 				"amount_for":"30.2", 				"cess":"13", 				"comment":"这是备注", 				"currency_id":"1", 				"exchange_rate":"13", 				"id":"1", 				"linked_bill_no":"001", 				"pacct_type_id":"1", 				"receive_info_entity":[ 					{ 						"pay_type_id":"微信", 						"receive_amount":"20", 						"settle_account_id":"1" 					} 				], 				"supplier_id":"1", 				"tax_amount":"10.3" 			} 		] 	}, 	"currency_id":"1", 	"cus_bear_fee_entry":[ 		{ 			"income_amount":"20.2", 			"income_comment":"备注XXXXXX", 			"income_name_id":"1" 		} 	], 	"cus_bear_fee_status":"B", 	"cus_currency_id":"1", 	"cus_exchange_rate":"20", 	"custom_field":{}, 	"customer_id":"697102424829079552", 	"customer_number":"ll", 	"delivery_type_id":"2", 	"dispatcher_address":"", 	"dispatcher_city_id":"1", 	"dispatcher_country_id":"5", 	"dispatcher_district_id":"2", 	"dispatcher_linkman":"小微", 	"dispatcher_phone":"13222445566", 	"dispatcher_province_id":"1", 	"emp_id":"1", 	"emp_number":"001", 	"id":"1", 	"ignore_warn":false, 	"material_entity":[ 		{ 			"all_amount":90.0, 			"amount":80.2, 			"aux_prop_id":"1", 			"bill_dis_before_amount":20, 			"cess":"13", 			"comment":"备注XXXXX", 			"custom_entity_field":{}, 			"delivery_date":"2020-01-13", 			"dis_amount":13.2, 			"discount":10, 			"id":"1", 			"is_free":true, 			"material_id":"741945988993837056", 			"material_number":"sp00001", 			"pre_dis_amount":"20.2", 			"price":50, 			"pro_license":"111201", 			"qty":1, 			"regain_price":true, 			"sp_id":"", 			"stock_id":"1", 			"tax_amount":"20.2", 			"tax_price":50.2, 			"unit_id":"1" 		} 	], 	"name":"1", 	"operation_key":"special_save", 	"payment_entry":[ 		{ 			"paid_amount":54.5, 			"pay_comment":"jjjjjjjjj", 			"pay_type_id":"1", 			"settle_account_id":"741869605307294720" 		} 	], 	"remark":"备注A", 	"required_invoice":false, 	"reverse_condition_calculate":false, 	"settle_customer_id":"697102424829079552", 	"total_amount":54.5, 	"total_ins_amount":20.2 }'
```

### 响应参数

| 参数名称 | 参数类型 | 参数说明 |
| --- | --- | --- |
| errcode | integer | 返回码，成功时为0 |
| description | string | 返回信息，成功时为success，失败时为具体信息 |
| data | Data | 业务返回具体对象 |

**Data**

| 参数名称 | 参数类型 | 参数说明 |
| --- | --- | --- |
| id\_number\_map | Map <string> | id与编码map |
| ids | List <string> | 单据id数组对象 |

#### 响应示例

```json
{
  "data": {
    "id_number_map": {},
    "ids": [
      "1"
    ]
  },
  "description": "success",
  "errcode": 0
}
```

#### 返回码

| 返回码 | 描述 | 解决方案 |
| --- | --- | --- |
| [公告返回码](https://open.jdy.com/#/files/api/detail?index=2&categrayId=1f51c576013945e2af68ef15d4245a48&id=525e704824d24b178ab466530456c037) | 公告返回码 |  |
| 2000002000 | 系统错误,请到开发者社区提单反馈 | [开发者社区](https://vip.kingdee.com/developer?productLineId=29) |
