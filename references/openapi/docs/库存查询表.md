---
id: "kdcloud-67b338214a8c11efa60d9bb6fa9f8020"
title: "库存查询表"
source: "金蝶云社区"
url: "https://open.jdy.com/#/files/api/detail?index=3&categrayId=&id=67b338214a8c11efa60d9bb6fa9f8020"
author: ""
published_at: ""
product: "金蝶云苍穹"
module: ["进销存云", "仓存报表"]
language: "Unknown"
version_hint: ["V2"]
keywords: []
quality: "B"
---

# 库存查询表

### 基本信息

-   用途说明：库存查询表
-   请求方式：GET
-   请求地址：https://api.kingdee.com/jdy/v2/inv/inv\_inventory\_ims

### 请求参数

#### headers参数

| 参数名称 | 参数示例 | 是否必填 | 参数说明 |
| --- | --- | --- | --- |
| Content-Type | application/json | true | 固定传：application/json |
| X-Api-ClientID | 205022 | true | 应用id，[创建指引](https://open.jdy.com/#/files/api/detail?index=3&categrayId=316e1f5bd9d711ed8e36c17691e84ff5&id=a540e3dcd9d811ed8e3677dc79b66e86&noside=true) |
| X-Api-Auth-Version | 2.0 | true | 固定传:2.0 |
| X-Api-TimeStamp | 1655775240000 | true | 当前时间毫秒时间戳，有效期为5min |
| X-Api-SignHeaders | X-Api-TimeStamp,X-Api-Nonce | true | 固定传：X-Api-TimeStamp,X-Api-Nonce |
| X-Api-Nonce | 1655775240000 | true | 随机正整数 |
| X-Api-Signature | xxx | true | [参考加密规则](https://open.jdy.com/#/files/api/detail?index=3&categrayId=5403e0fd6a5811eda819b759130d6d33&id=b5c26557da9d11ed8e36f9799578d2e1&noside=true) |
| app-token | xxx | true | 产品账套级别的token，[获取指引](https://open.jdy.com/#/files/api/detail?index=3&categrayId=5403e0fd6a5811eda819b759130d6d33&id=9076d1a6da9d11ed8e36874bed64e0be&noside=true) |
| X-GW-Router-Addr | https://tf.jdy.com | true | IDC域名，获取appKey返回消息体内的domain字段 |

#### params参数

| 参数名称 | 参数类型 | 是否必填 | 参数说明 |
| --- | --- | --- | --- |
| calc\_cost | boolean | false | 是否计算成本 |
| filter\_aux\_unit\_choice | string | false | 辅助单位；1：库存单位；2：采购单位；3：销售单位；4：报表辅助单位 |
| filter\_date | string | false | 日期，opt\_group\_inv\_query\_type为2是要传递；格式：yyyy-MM-dd |
| filter\_material\_category | array | false | 商品类别id |
| filter\_material\_id | array | false | 商品id |
| filter\_material\_label | array | false | 商品标签id |
| filter\_material\_model | string | false | 规格型号 |
| filter\_sp\_id | array | false | 仓位id |
| filter\_stock\_category | array | false | 仓库分类id |
| filter\_stock\_id | array | false | 仓库id |
| opt\_group\_inv\_query\_type | string | false | 查询类型：1：即时库存；2：指定日期 |
| page | integer | false | 当前页，默认1 |
| page\_size | integer | false | 页大小，可选50/100/500/1000，默认100 |
| search | string | false | 模糊搜索，支持商品名称 |
| show\_aux\_prop\_id | boolean | false | 是否显示辅助属性 |
| show\_batch\_no\_kf\_period | boolean | false | 是否显示批次和保质期 |
| show\_forbidden | boolean | false | 是否显示禁用商品 |
| show\_no\_bus | boolean | false | 是否显示无发生额商品 |
| show\_sp | boolean | false | 是否显示仓位 |
| show\_zero | boolean | false | 是否显示零库存 |
| type | string | false | 查询类型，1：汇总计算，2：展示明细，默认2 |

#### 请求示例

```bash
curl --location --request  get 'https://api.kingdee.com/jdy/v2/inv/inv_inventory_ims?calc_cost=false&filter_aux_unit_choice=1&filter_date=2022-05-12&filter_material_category=[]&filter_material_id=[]&filter_material_label=[]&filter_material_model=11&filter_sp_id=[]&filter_stock_category=[]&filter_stock_id=[]&opt_group_inv_query_type=1&page=1&page_size=100&search=1&show_aux_prop_id=false&show_batch_no_kf_period=false&show_forbidden=false&show_no_bus=false&show_sp=false&show_zero=false&type=1' \
--header 'Content-Type: application/json' \
--header 'X-Api-ClientID: 205022' \
--header 'X-Api-Auth-Version: 2.0' \
--header 'X-Api-TimeStamp: 1655775240000' \
--header 'X-Api-Nonce: 1655775240000' \
--header 'X-Api-SignHeaders: X-Api-TimeStamp,X-Api-Nonce' \
--header 'X-Api-Signature: xxx' \
--header 'app-token: xxx' \
--header 'X-GW-Router-Addr: https://tf.jdy.com'
```

### 响应参数

| 参数名称 | 参数类型 | 参数说明 |
| --- | --- | --- |
| errcode | integer | 返回码，成功时为0 |
| description | string | 返回信息，成功时为success，失败时为具体信息 |
| data | Data | 业务返回具体对象 |

**Data**

| 参数名称 | 参数类型 | 参数说明 |
| --- | --- | --- |
| count | integer | 总计条目 |
| current\_page\_size | integer | 当前页大小 |
| page | integer | 当前页 |
| page\_size | integer | 页大小 |
| rows | List <Row> | 返回数据列表 |
| sum | Sum | 合计 |
| total\_page | integer | 总页数 |

**Sum**

| 参数名称 | 参数类型 | 参数说明 |
| --- | --- | --- |
| aux\_qty | string | 辅助即时库存 |
| cost | string | 成本，勾选计算成本时才返回 |
| material\_num | string | 商品个数 |
| purchase\_amount | string | 采购总金额 |
| qty | string | 即时库存 |
| retail\_amount | string | 零售总金额 |
| trade\_amount | string | 参考批发总金额 |
| valid\_qty | string | 可用库存 |

**Row**

| 参数名称 | 参数类型 | 参数说明 |
| --- | --- | --- |
| aux\_prop\_id | string | 辅助属性id |
| aux\_prop\_name | string | 辅助属性名称 |
| aux\_qty | number | 即时库存(辅助单位) |
| aux\_unit\_id | string | 辅助单位id |
| aux\_unit\_name | string | 辅助单位名称 |
| barcode | string | 商品条码 |
| base\_unit\_id | string | 基本单位id |
| batch\_no | string | 批次 |
| cost | number | 成本 |
| kf\_date | string | 生产日期 |
| kf\_period | string | 保质期 |
| kf\_type | string | 保质期类型(保质期类型 1:天,2:月,3:年) |
| material\_brand\_name | string | 商品品牌名称 |
| material\_category\_name | string | 商品类别名称 |
| material\_help\_code | string | 助记码 |
| material\_id | string | 商品id |
| material\_is\_asst\_attr | boolean | 是否开启辅助属性 |
| material\_is\_batch | boolean | 是否开启批次 |
| material\_is\_kf\_period | boolean | 是否开启保质期 |
| material\_model | string | 规格型号 |
| material\_name | string | 商品名称 |
| material\_number | string | 商品编码 |
| material\_picture | string | 商品图片 |
| pkg\_qty | string | 即时库存（整件散包） |
| pkg\_valid\_qty | string | 可用库存（整件散包） |
| purchase\_amount | number | 参考采购总金额 |
| purchase\_price | number | 参考采购价 |
| qty | number | 即时库存(基本单位) |
| retail\_amount | number | 参考零售总金额 |
| retail\_price | number | 参考零售价 |
| sp\_id | string | 仓位id |
| sp\_name | string | 仓位名称 |
| sp\_number | string | 仓位编码 |
| stock\_id | string | 仓库id |
| stock\_is\_allow\_freight | boolean | 仓库是否开启仓位 |
| stock\_number | string | 仓库编码 |
| stockid\_name | string | 仓库名称 |
| trade\_amount | number | 参考批发总金额 |
| trade\_price | number | 参考批发价 |
| unit\_cost | number | 单位成本 |
| valid\_aux\_qty | number | 可用库存（辅助单位） |
| valid\_date | string | 有效日期 |
| valid\_qty | number | 可用库存（基本单位） |

#### 响应示例

```json
{
  "data": {
    "count": 30,
    "current_page_size": 10,
    "page": 1,
    "page_size": 10,
    "rows": [
      {
        "aux_prop_id": "121",
        "aux_prop_name": "001",
        "aux_qty": 12,
        "aux_unit_id": "2",
        "aux_unit_name": "12",
        "barcode": "0001",
        "base_unit_id": "001",
        "batch_no": "2",
        "cost": 1,
        "kf_date": "121",
        "kf_period": "12",
        "kf_type": "1",
        "material_brand_name": "121",
        "material_category_name": "0001",
        "material_help_code": "1",
        "material_id": "8440",
        "material_is_asst_attr": false,
        "material_is_batch": false,
        "material_is_kf_period": false,
        "material_model": "11",
        "material_name": "8440",
        "material_number": "8440",
        "material_picture": "2",
        "pkg_qty": "11",
        "pkg_valid_qty": "1",
        "purchase_amount": 12,
        "purchase_price": 2,
        "qty": 1,
        "retail_amount": 1,
        "retail_price": 121,
        "sp_id": "121",
        "sp_name": "121",
        "sp_number": "121",
        "stock_id": "2",
        "stock_is_allow_freight": false,
        "stock_number": "12",
        "stockid_name": "AA",
        "trade_amount": 1,
        "trade_price": 11,
        "unit_cost": 15,
        "valid_aux_qty": 1,
        "valid_date": "15",
        "valid_qty": 1
      }
    ],
    "sum": {
      "aux_qty": "10",
      "cost": "10",
      "material_num": "3",
      "purchase_amount": "3",
      "qty": "10",
      "retail_amount": "3",
      "trade_amount": "10",
      "valid_qty": "3"
    },
    "total_page": 3
  },
  "description": "success",
  "errcode": 0
}
```

#### 返回码

| 返回码 | 描述 | 解决方案 |
| --- | --- | --- |
| [公告返回码](https://open.jdy.com/#/files/api/detail?index=2&categrayId=1f51c576013945e2af68ef15d4245a48&id=525e704824d24b178ab466530456c037) | 公告返回码 |  |
| 2000002000 | 系统错误,请到开发者社区提单反馈 | [开发者社区](https://vip.kingdee.com/developer?productLineId=29) |
