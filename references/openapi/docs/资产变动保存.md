---
id: "kdcloud-f80da53647f411ee8c8ba5aae53216f4"
title: "资产变动保存"
source: "金蝶云社区"
url: "https://open.jdy.com/#/files/api/detail?index=3&categrayId=&id=f80da53647f411ee8c8ba5aae53216f4"
author: ""
published_at: ""
product: "金蝶云苍穹"
module: ["财税云", "资产", "资产变动"]
language: "Kingscript"
version_hint: ["V2"]
keywords: []
quality: "B"
---

# 资产变动保存

### 基本信息

-   用途说明：资产变动保存
-   请求方式：POST
-   请求地址：https://api.kingdee.com/jdy/v2/fi/fa\_alter\_save

### 请求参数

#### headers参数

| 参数名称 | 参数示例 | 是否必填 | 参数说明 |
| --- | --- | --- | --- |
| Content-Type | application/json | true | 固定传：application/json |
| X-Api-ClientID | 205022 | true | 应用id，[创建指引](https://open.jdy.com/#/files/api/detail?index=3&categrayId=316e1f5bd9d711ed8e36c17691e84ff5&id=a540e3dcd9d811ed8e3677dc79b66e86&noside=true) |
| X-Api-Auth-Version | 2.0 | true | 固定传:2.0 |
| X-Api-TimeStamp | 1655775240000 | true | 当前时间毫秒时间戳，有效期为5min |
| X-Api-SignHeaders | X-Api-TimeStamp,X-Api-Nonce | true | 固定传：X-Api-TimeStamp,X-Api-Nonce |
| X-Api-Nonce | 1655775240000 | true | 随机正整数 |
| X-Api-Signature | xxx | true | [参考加密规则](https://open.jdy.com/#/files/api/detail?index=3&categrayId=5403e0fd6a5811eda819b759130d6d33&id=b5c26557da9d11ed8e36f9799578d2e1&noside=true) |
| app-token | xxx | true | 产品账套级别的token，[获取指引](https://open.jdy.com/#/files/api/detail?index=3&categrayId=5403e0fd6a5811eda819b759130d6d33&id=9076d1a6da9d11ed8e36874bed64e0be&noside=true) |
| X-GW-Router-Addr | https://tf.jdy.com | true | IDC域名，获取appKey返回消息体内的domain字段 |

#### body参数

| 参数名称 | 参数类型 | 是否必填 | 参数说明 |
| --- | --- | --- | --- |
| date | string | true | 单据日期 |
| asset\_list | List <AssetList> | false | 资产的变动分录（每个资产的alter\_type值要一致，数量和值都需要相同 |
| number | string | false | 单据编码 |

**AssetList**

| 参数名称 | 参数类型 | 是否必填 | 参数说明 |
| --- | --- | --- | --- |
| asset\_id | string | true | 资产ID |
| mode | string | true | 变动方式id |
| alter\_list | List <AlterList> | false | 变动后的值，根据alter\_type确定类型，见变动项类型 alter\_type说明 |

**AlterList**

| 参数名称 | 参数类型 | 是否必填 | 参数说明 |
| --- | --- | --- | --- |
| alter\_type | string | true | 变动类型,详细传值看[变动项类型](https://open.jdy.com/#/files/api/detail?index=3&categrayId=3cc8ee9a663e11eda5c84b5d383a2b93&id=946baa86479f11ee8c8b274522b4ea62) |
| alter\_assist | List <Assist> | false | 减值准备科目核算项目id |
| alter\_value | string | false | 变动后的值，alter\_value 与 alter\_value\_list二选一，根据alter\_type确定传值类型为String时，使用该字段传值，详细传值看[变动项类型](https://open.jdy.com/#/files/api/detail?index=3&categrayId=3cc8ee9a663e11eda5c84b5d383a2b93&id=946baa86479f11ee8c8b274522b4ea62) |
| alter\_value\_list | List <AlterValueList> | false | 变动后的值，alter\_value 与 alter\_value\_list二选一，根据alter\_type确定传值类型为array时，使用该字段传值，详细传值看[变动项类型](https://open.jdy.com/#/files/api/detail?index=3&categrayId=3cc8ee9a663e11eda5c84b5d383a2b93&id=946baa86479f11ee8c8b274522b4ea62) |

**AlterValueList**

| 参数名称 | 参数类型 | 是否必填 | 参数说明 |
| --- | --- | --- | --- |
| account\_id | string | false | 折旧分配科目id |
| amount | string | false | 本位币金额 |
| amount\_for | string | false | 原币金额，不赋值默认为amount的值，不会检测汇率与原币，本位币金额是否一致 |
| assist | List <Assist> | false | 科目对应的核算项目，科目启用了必录核算项目是必录 |
| currency\_id | string | false | 币别id |
| dept\_id | string | false | 部门ID |
| exchange\_rate | string | false | 币别汇率（数值），不赋值默认为1 |
| percent | string | false | 部门占比（%），范围（0,100\],所有precent合计为100 |

**Assist**

| 参数名称 | 参数类型 | 是否必填 | 参数说明 |
| --- | --- | --- | --- |
| bd\_aux\_info\_type\_id | string | false | 当type为bd\_auxinfo时必填，辅助资料类别id |
| id | string | false | type类别下的基础资料id，例如：type=“bu\_customer”时，id值为客户id |
| type | string | false | 辅助核算类别(客户-bd\_customer，供应商-bd\_supplier， 商品-bd\_material，部门-bd\_department，职员-bd\_employee，仓库-bd\_store，辅助资料-bd\_auxinfo) |

#### 请求示例

```bash
curl --location --request  post 'https://api.kingdee.com/jdy/v2/fi/fa_alter_save' \
--header 'Content-Type: application/json' \
--header 'X-Api-ClientID: 205022' \
--header 'X-Api-Auth-Version: 2.0' \
--header 'X-Api-TimeStamp: 1655775240000' \
--header 'X-Api-Nonce: 1655775240000' \
--header 'X-Api-SignHeaders: X-Api-TimeStamp,X-Api-Nonce' \
--header 'X-Api-Signature: xxx' \
--header 'app-token: xxx' \
--header 'X-GW-Router-Addr: https://tf.jdy.com' \
--data-row ' { 	"asset_list":[ 		{ 			"alter_list":[ 				{ 					"alter_assist":[ 						{ 							"bd_aux_info_type_id":"1", 							"id":"1", 							"type":"1" 						} 					], 					"alter_type":"txtdept", 					"alter_value":"", 					"alter_value_list":[ 						{ 							"account_id":"1", 							"amount":"20", 							"amount_for":"100", 							"assist":[ 								{ 									"bd_aux_info_type_id":"1", 									"id":"1", 									"type":"1" 								} 							], 							"currency_id":"1", 							"dept_id":"0111", 							"exchange_rate":"1", 							"percent":"5%" 						} 					] 				} 			], 			"asset_id":"1", 			"mode":"0001001" 		} 	], 	"date":"2020-03-10", 	"number":"DBCK-20200310-00001" }'
```

### 响应参数

| 参数名称 | 参数类型 | 参数说明 |
| --- | --- | --- |
| errcode | integer | 返回码，成功时为0 |
| description | string | 返回信息，成功时为success，失败时为具体信息 |
| data | Data | 业务返回具体对象 |

**Data**

| 参数名称 | 参数类型 | 参数说明 |
| --- | --- | --- |
| id\_number\_map | Map <string> | id与编码map |
| ids | List <string> | 单据id数组对象 |

#### 响应示例

```json
{
  "data": {
    "id_number_map": {},
    "ids": [
      "1"
    ]
  },
  "description": "success",
  "errcode": 0
}
```

#### 返回码

| 返回码 | 描述 | 解决方案 |
| --- | --- | --- |
| [公告返回码](https://open.jdy.com/#/files/api/detail?index=2&categrayId=1f51c576013945e2af68ef15d4245a48&id=525e704824d24b178ab466530456c037) | 公告返回码 |  |
| 2000002000 | 系统错误,请到开发者社区提单反馈 | [开发者社区](https://vip.kingdee.com/developer?productLineId=29) |
