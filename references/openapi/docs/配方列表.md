---
id: "kdcloud-419f1217c16711ee8bba018a9760d50e"
title: "配方列表"
source: "金蝶云社区"
url: "https://open.jdy.com/#/files/api/detail?index=3&categrayId=&id=419f1217c16711ee8bba018a9760d50e"
author: ""
published_at: ""
product: "金蝶云苍穹"
module: ["零售云", "零售资料", "配方管理"]
language: "Unknown"
version_hint: ["V2"]
keywords: []
quality: "B"
---

# 配方列表

### 基本信息

-   用途说明：配方列表
-   请求方式：GET
-   请求地址：https://api.kingdee.com/jdy/v2/ls/formula

### 请求参数

#### headers参数

| 参数名称 | 参数示例 | 是否必填 | 参数说明 |
| --- | --- | --- | --- |
| Content-Type | application/json | true | 固定传：application/json |
| X-Api-ClientID | 205022 | true | 应用id，[创建指引](https://open.jdy.com/#/files/api/detail?index=3&categrayId=316e1f5bd9d711ed8e36c17691e84ff5&id=a540e3dcd9d811ed8e3677dc79b66e86&noside=true) |
| X-Api-Auth-Version | 2.0 | true | 固定传:2.0 |
| X-Api-TimeStamp | 1655775240000 | true | 当前时间毫秒时间戳，有效期为5min |
| X-Api-SignHeaders | X-Api-TimeStamp,X-Api-Nonce | true | 固定传：X-Api-TimeStamp,X-Api-Nonce |
| X-Api-Nonce | 1655775240000 | true | 随机正整数 |
| X-Api-Signature | xxx | true | [参考加密规则](https://open.jdy.com/#/files/api/detail?index=3&categrayId=5403e0fd6a5811eda819b759130d6d33&id=b5c26557da9d11ed8e36f9799578d2e1&noside=true) |
| app-token | xxx | true | 产品账套级别的token，[获取指引](https://open.jdy.com/#/files/api/detail?index=3&categrayId=5403e0fd6a5811eda819b759130d6d33&id=9076d1a6da9d11ed8e36874bed64e0be&noside=true) |
| X-GW-Router-Addr | https://tf.jdy.com | true | IDC域名，获取appKey返回消息体内的domain字段 |

#### params参数

| 参数名称 | 参数类型 | 是否必填 | 参数说明 |
| --- | --- | --- | --- |
| data.page | integer | true | 当前页，从1开始 |
| data.page\_size | integer | true | 每页显示条数 |
| data.create\_end\_time | string | false | 创建时间-结束时间的时间戳(毫秒) |
| data.create\_start\_time | string | false | 创建时间-开始时间的时间戳(毫秒) |
| data.modify\_end\_time | string | false | 修改时间-结束时间的时间戳(毫秒) |
| data.modify\_start\_time | string | false | 修改时间-开始时间的时间戳(毫秒) |
| data.name | string | false | 门店名称 |

#### 请求示例

```bash
curl --location --request  get 'https://api.kingdee.com/jdy/v2/ls/formula?data.page=001&data.page_size=001&data.create_end_time=1234567890123&data.create_start_time=1234567890123&data.modify_end_time=1234567890123&data.modify_start_time=1234567890123&data.name=门店名称' \
--header 'Content-Type: application/json' \
--header 'X-Api-ClientID: 205022' \
--header 'X-Api-Auth-Version: 2.0' \
--header 'X-Api-TimeStamp: 1655775240000' \
--header 'X-Api-Nonce: 1655775240000' \
--header 'X-Api-SignHeaders: X-Api-TimeStamp,X-Api-Nonce' \
--header 'X-Api-Signature: xxx' \
--header 'app-token: xxx' \
--header 'X-GW-Router-Addr: https://tf.jdy.com'
```

### 响应参数

| 参数名称 | 参数类型 | 参数说明 |
| --- | --- | --- |
| errcode | integer | 返回码，成功时为0 |
| description | string | 返回信息，成功时为success，失败时为具体信息 |
| data | Data | 业务返回具体对象 |

**Data**

| 参数名称 | 参数类型 | 参数说明 |
| --- | --- | --- |
| count | integer | 总条数 |
| cur\_page\_size | integer | 当前页条数 |
| page | integer | 当前页 |
| page\_size | integer | 每页条数 |
| rows | List <Row> | 数据列表 |
| total\_page | integer | 总页数 |

**Row**

| 参数名称 | 参数类型 | 参数说明 |
| --- | --- | --- |
| material\_id | string | 商品id |
| create\_time | string | 创建时间 |
| id | string | 门店id |
| material\_list | List <MaterialRow> | 原料商品列表 |
| material\_name | string | 商品名称 |
| material\_number | string | 商品编码 |
| name | string | 配方名称 |
| number | string | 配方编号 |
| sku\_id | string | 主商品辅助属性ID |
| sku\_name | string | 主商品辅助属性名称 |
| status | string | 状态；“1”=启用，“2”=禁用 |
| store\_list | List <StoreRow> | 门店信息列表 |
| suit\_store\_type | string | 全部门店=1 |
| unit\_id | string | 主商品单位ID |
| unit\_name | string | 主商品单位名称 |

**StoreRow**

| 参数名称 | 参数类型 | 参数说明 |
| --- | --- | --- |
| is\_drop\_out | boolean | 是否排除 |
| type | string | 类型；1=门店；2=标签 |
| type\_id | string | 门店ID |
| type\_name | string | 门店名 |

**MaterialRow**

| 参数名称 | 参数类型 | 参数说明 |
| --- | --- | --- |
| material\_id | string | 原料商品ID |
| material\_name | string | 商品名称 |
| material\_number | string | 商品编码 |
| other\_material\_list | List <OtherMaterialRow> | 替换商品列表 |
| qty | number | 原料商品消耗量 |
| sku\_id | string | 商品辅助属性ID |
| sku\_name | string | 商品辅助属性名称 |
| unit\_id | string | 商品单位ID |
| unit\_name | string | 商品单位名称 |

**OtherMaterialRow**

| 参数名称 | 参数类型 | 参数说明 |
| --- | --- | --- |
| material\_id | string | 原料商品ID |
| material\_name | string | 商品名称 |
| material\_number | string | 商品编码 |
| qty | number | 原料商品消耗量 |
| sku\_id | string | 商品辅助属性ID |
| sku\_name | string | 商品辅助属性名称 |
| unit\_id | string | 商品单位ID |
| unit\_name | string | 商品单位名称 |

#### 响应示例

```json
{
  "data": {
    "count": 100,
    "cur_page_size": 1,
    "page": 1,
    "page_size": 100,
    "rows": [
      {
        "create_time": "2020-08-03 19:18:58.0",
        "id": "001",
        "material_id": "697140092908614656",
        "material_list": [
          {
            "material_id": "697140092908614656",
            "material_name": "sp00001",
            "material_number": "sp00001",
            "other_material_list": [
              {
                "material_id": "697140092908614656",
                "material_name": "sp00001",
                "material_number": "sp00001",
                "qty": 1,
                "sku_id": "1",
                "sku_name": "sp00001",
                "unit_id": "1",
                "unit_name": "sp00001"
              }
            ],
            "qty": 1,
            "sku_id": "1",
            "sku_name": "sp00001",
            "unit_id": "1",
            "unit_name": "sp00001"
          }
        ],
        "material_name": "sp00001",
        "material_number": "sp00001",
        "name": "sp00001",
        "number": "sp00001",
        "sku_id": "1",
        "sku_name": "sp00001",
        "status": "1",
        "store_list": [
          {
            "is_drop_out": false,
            "type": "1",
            "type_id": "1",
            "type_name": "1"
          }
        ],
        "suit_store_type": "1",
        "unit_id": "1",
        "unit_name": "sp00001"
      }
    ],
    "total_page": 10
  },
  "description": "success",
  "errcode": 0
}
```

#### 返回码

| 返回码 | 描述 | 解决方案 |
| --- | --- | --- |
| [公告返回码](https://open.jdy.com/#/files/api/detail?index=2&categrayId=1f51c576013945e2af68ef15d4245a48&id=525e704824d24b178ab466530456c037) | 公告返回码 |  |
| 2000002000 | 系统错误,请到开发者社区提单反馈 | [开发者社区](https://vip.kingdee.com/developer?productLineId=29) |
